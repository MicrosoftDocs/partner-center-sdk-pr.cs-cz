---
title: Správa výběrů pomocí rozhraní API služby výběr
description: Naučte se používat rozhraní API služby vydaných partnerským centrem pro přístup k datům z výběrů.
ms.date: 06/23/2021
ms.service: partner-dashboard
ms.subservice: partnercenter-sdk
author: jasongroce
ms.author: sabaja
ms.openlocfilehash: 014a1e6a14b538b7557d58710b9132dd9e37de21
ms.sourcegitcommit: 7e2d2805c4cdd61785b1cdcca99cad10d5683153
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 07/10/2021
ms.locfileid: "113592420"
---
# <a name="manage-payouts-using-the-payout-service-api"></a><span data-ttu-id="73181-103">Správa výběrů pomocí rozhraní API služby výběr</span><span class="sxs-lookup"><span data-stu-id="73181-103">Manage payouts using the Payout Service API</span></span>

<span data-ttu-id="73181-104">V tomto článku se dozvíte, jak můžete přistupovat k datům o druhu přes rozhraní API služby výběr namísto uživatelského rozhraní partnerského centra.</span><span class="sxs-lookup"><span data-stu-id="73181-104">This article explains how you can access payout data through the Payout Service APIs instead of the Partner Center UI.</span></span> <span data-ttu-id="73181-105">Tato rozhraní API poskytují programový způsob, jak zajistit schopnost funkce [exportovat data](https://partner.microsoft.com/dashboard/payouts/reports/incentiveexport) v partnerském centru.</span><span class="sxs-lookup"><span data-stu-id="73181-105">These APIs provide a programmatic way to provide the capability of the [Export data](https://partner.microsoft.com/dashboard/payouts/reports/incentiveexport) feature in Partner Center.</span></span>

## <a name="available-apis"></a><span data-ttu-id="73181-106">Dostupná rozhraní API</span><span class="sxs-lookup"><span data-stu-id="73181-106">Available APIs</span></span>

<span data-ttu-id="73181-107">Podívejte se na všechna dostupná rozhraní API na [výběrech partnerských](/rest/api/partner-center/partner-payouts)serverů.</span><span class="sxs-lookup"><span data-stu-id="73181-107">See all available APIs at [Partner Payouts](/rest/api/partner-center/partner-payouts).</span></span>

## <a name="prerequisites"></a><span data-ttu-id="73181-108">Požadavky</span><span class="sxs-lookup"><span data-stu-id="73181-108">Prerequisites</span></span>

- <span data-ttu-id="73181-109">[Zaregistrujte aplikaci s identitou AAD/Microsoft](/graph/auth-register-app-v2) ve Azure Portal a přidejte do ní příslušné vlastníky a role.</span><span class="sxs-lookup"><span data-stu-id="73181-109">[Register an application with AAD/Microsoft Identity](/graph/auth-register-app-v2) in the Azure portal, and add appropriate owners and roles to the application.</span></span>
- <span data-ttu-id="73181-110">Nainstalujte [Visual Studio](https://visualstudio.microsoft.com/downloads/).</span><span class="sxs-lookup"><span data-stu-id="73181-110">Install [Visual Studio](https://visualstudio.microsoft.com/downloads/).</span></span>

## <a name="register-an-application-with-the-microsoft-identity-platform"></a><span data-ttu-id="73181-111">Registrace aplikace na platformě Microsoft Identity Platform</span><span class="sxs-lookup"><span data-stu-id="73181-111">Register an application with the Microsoft identity platform</span></span>

<span data-ttu-id="73181-112">[Microsoft identity platform](/azure/active-directory/develop/v2-overview) vám pomůže se sestavovat aplikace, které můžou uživatelé a zákazníci přihlašovat k používání svých identit microsoftu nebo účtů sociálních sítí, a poskytovat autorizovaný přístup k vašim vlastním rozhraním api nebo rozhraním api microsoftu, jako je Microsoft Graph.</span><span class="sxs-lookup"><span data-stu-id="73181-112">The [Microsoft identity platform](/azure/active-directory/develop/v2-overview) helps you build applications your users and customers can sign in to using their Microsoft identities or social accounts, and provide authorized access to your own APIs or Microsoft APIs like Microsoft Graph.</span></span>

1. <span data-ttu-id="73181-113">Přihlaste se k webu [Azure Portal](https://portal.azure.com/) pomocí pracovního nebo školního účtu nebo osobního účtu Microsoft.</span><span class="sxs-lookup"><span data-stu-id="73181-113">Sign in to the [Azure portal](https://portal.azure.com/) using either a work or school account or a personal Microsoft account.</span></span>

   <span data-ttu-id="73181-114">Pokud vám váš účet poskytne přístup k více než jednomu klientovi, v pravém horním rohu vyberte svůj účet a nastavte svou relaci portálu na správného tenanta Azure AD.</span><span class="sxs-lookup"><span data-stu-id="73181-114">If your account gives you access to more than one tenant, select your account in the upper right corner and set your portal session to the correct Azure AD tenant.</span></span>

2. <span data-ttu-id="73181-115">v levém navigačním podokně vyberte službu Azure Active Directory a pak **Registrace aplikací** a pak **novou registraci**.</span><span class="sxs-lookup"><span data-stu-id="73181-115">In the left navigation pane, select the Azure Active Directory service, then **App registrations**, then **New registration**.</span></span> <span data-ttu-id="73181-116">Zobrazí se stránka **zaregistrovat aplikaci** .</span><span class="sxs-lookup"><span data-stu-id="73181-116">The **Register an application** page appears.</span></span>

   :::image type="content" source="./images/manage-payouts/new-app-registration.png" alt-text="Snímek obrazovky s informacemi o registraci aplikace v Azure Portal":::

3. <span data-ttu-id="73181-118">Zadejte informace o registraci vaší aplikace:</span><span class="sxs-lookup"><span data-stu-id="73181-118">Enter your application's registration information:</span></span>

   - <span data-ttu-id="73181-119">Název: zadejte smysluplný název aplikace, který se zobrazí uživatelům aplikace.</span><span class="sxs-lookup"><span data-stu-id="73181-119">Name: Enter a meaningful application name that will be displayed to users of the app.</span></span>
   - <span data-ttu-id="73181-120">Podporované typy účtů: vyberte, které účty bude vaše aplikace podporovat.</span><span class="sxs-lookup"><span data-stu-id="73181-120">Supported account types: Select which accounts your application will support.</span></span>

    | <span data-ttu-id="73181-121">**Podporované typy účtu**</span><span class="sxs-lookup"><span data-stu-id="73181-121">**Supported account types**</span></span>                             | <span data-ttu-id="73181-122">**Popis**</span><span class="sxs-lookup"><span data-stu-id="73181-122">**Description**</span></span>                                                                                            |
    |---------------------------------------------------------|------------------------------------------------------------------------------------------------------------|
    | <span data-ttu-id="73181-123">Jenom účty v tomto organizačním adresáři</span><span class="sxs-lookup"><span data-stu-id="73181-123">Only accounts in this organizational directory</span></span>          | <span data-ttu-id="73181-124">Tuto možnost vyberte, pokud vytváříte obchodní aplikaci.</span><span class="sxs-lookup"><span data-stu-id="73181-124">Select this option if you're building a line-of-business (LOB) application.</span></span> <span data-ttu-id="73181-125">Tato možnost není dostupná, pokud neregistrujete aplikaci v adresáři.</span><span class="sxs-lookup"><span data-stu-id="73181-125">This option is not available if you're not registering the application in a directory.</span></span> <span data-ttu-id="73181-126">Tato možnost se mapuje pouze na účty Azure AD s jedním tenantem.</span><span class="sxs-lookup"><span data-stu-id="73181-126">This option maps to Azure AD only single-tenant.</span></span>  <span data-ttu-id="73181-127">Tato možnost je výchozí, pokud neprovádíte registraci aplikace mimo adresář.</span><span class="sxs-lookup"><span data-stu-id="73181-127">This option is the default unless you're registering the app outside of a directory.</span></span> <span data-ttu-id="73181-128">V případech, kdy je aplikace zaregistrovaná mimo adresář, jsou výchozí možností účty Azure AD s více tenanty a osobní účty Microsoft.</span><span class="sxs-lookup"><span data-stu-id="73181-128">In cases where the app is registered outside of a directory, the default is Azure AD multi-tenant and personal Microsoft accounts.</span></span>             |
    | <span data-ttu-id="73181-129">Účty v libovolném organizačním adresáři</span><span class="sxs-lookup"><span data-stu-id="73181-129">Accounts in any organizational directory</span></span>                | <span data-ttu-id="73181-130">Tuto možnost vyberte, pokud chcete cílit na všechny zákazníky z řad firem a vzdělávacích institucí.</span><span class="sxs-lookup"><span data-stu-id="73181-130">Select this option if you would like to target all business and educational customers.</span></span>  <span data-ttu-id="73181-131">Tato možnost se mapuje pouze na účty Azure AD s více tenanty.</span><span class="sxs-lookup"><span data-stu-id="73181-131">This option maps to an Azure AD only multi-tenant.</span></span> <span data-ttu-id="73181-132">Pokud jste při registraci aplikace použili možnost s účty Azure AD pouze s jedním tenantem, v okně Ověřování ji můžete převést na účet Azure AD s více tenanty a zpět na účet Azure AD s jedním tenantem.</span><span class="sxs-lookup"><span data-stu-id="73181-132">If you registered the app as Azure AD only single-tenant, you can update it to be Azure AD multi-tenant and back to single-tenant through the Authentication blade.</span></span>                                                                                                                                                  |
    | <span data-ttu-id="73181-133">Účty v libovolném organizačním adresáři a osobní účty Microsoft</span><span class="sxs-lookup"><span data-stu-id="73181-133">Accounts in any organizational directory and personal Microsoft accounts</span></span> | <span data-ttu-id="73181-134">Tuto možnost vyberte, pokud chcete cílit na co nejširší okruh zákazníků.</span><span class="sxs-lookup"><span data-stu-id="73181-134">Select this option to target the widest set of customers.</span></span> <span data-ttu-id="73181-135">Tato možnost se mapuje na účty Azure AD s více tenanty a osobní účty Microsoft.</span><span class="sxs-lookup"><span data-stu-id="73181-135">This option maps to Azure AD multi-tenant and personal Microsoft accounts.</span></span>  <span data-ttu-id="73181-136">Pokud jste aplikaci zaregistrovali jako víceklientské a osobní účty Microsoft Azure AD, nemůžete tento výběr v uživatelském rozhraní změnit.</span><span class="sxs-lookup"><span data-stu-id="73181-136">If you registered the app as Azure AD multi-tenant and personal Microsoft accounts, you cannot change this selection in the UI.</span></span> <span data-ttu-id="73181-137">Místo toho musíte ke změně podporovaných typů účtu použít editor manifestu aplikace.</span><span class="sxs-lookup"><span data-stu-id="73181-137">Instead, you must use the application manifest editor to change the supported account types.</span></span>                                                                          |

   - <span data-ttu-id="73181-138">*(volitelné)* Identifikátor URI pro přesměrování: Vyberte typ aplikace, kterou vytváříte, webový nebo veřejný klient (mobilní & Desktop) a pak zadejte identifikátor URI přesměrování (nebo adresu URL odpovědi) pro vaši aplikaci.</span><span class="sxs-lookup"><span data-stu-id="73181-138">*(optional)* Redirect URI: Select the type of app you're building, Web or Public client (mobile & desktop), and then enter the redirect URI (or reply URL) for your application.</span></span> <span data-ttu-id="73181-139">(Adresa URL pro přesměrování je místo, kde se pošle odpověď na ověření po ověření uživatele.)</span><span class="sxs-lookup"><span data-stu-id="73181-139">(The redirect URL is where the authentication response will be sent after the user authenticates.)</span></span> 

      <span data-ttu-id="73181-140">V případě webových aplikací zadejte základní adresu URL vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="73181-140">For web applications, provide the base URL of your app.</span></span> <span data-ttu-id="73181-141">Například `http://localhost:31544` může být adresa URL pro webovou aplikaci spuštěnou na místním počítači.</span><span class="sxs-lookup"><span data-stu-id="73181-141">For example, `http://localhost:31544` might be the URL for a web app running on your local machine.</span></span> <span data-ttu-id="73181-142">Uživatelé by se pomocí této adresy URL přihlašovali k webové klientské aplikaci.</span><span class="sxs-lookup"><span data-stu-id="73181-142">Users would use this URL to sign in to a web client application.</span></span>
      <span data-ttu-id="73181-143">V případě veřejných klientských aplikací zadejte identifikátor URI, který Azure AD použije k vrácení odpovědí týkajících se tokenu.</span><span class="sxs-lookup"><span data-stu-id="73181-143">For public client applications, provide the URI used by Azure AD to return token responses.</span></span> <span data-ttu-id="73181-144">Zadejte konkrétní hodnotu pro vaši aplikaci, například `myapp://auth`.</span><span class="sxs-lookup"><span data-stu-id="73181-144">Enter a value specific to your application, such as `myapp://auth`.</span></span>

4. <span data-ttu-id="73181-145">Vyberte **Zaregistrovat**.</span><span class="sxs-lookup"><span data-stu-id="73181-145">Select **Register**.</span></span> <span data-ttu-id="73181-146">Azure AD přiřadí vaší aplikaci jedinečné ID aplikace (klienta) a načte se stránka s přehledem aplikace.</span><span class="sxs-lookup"><span data-stu-id="73181-146">Azure AD assigns a unique application (client) ID to your application, and the application's overview page loads.</span></span>

   :::image type="content" source="./images/manage-payouts/register-an-application.png" alt-text="<alternativní text>":::

5. <span data-ttu-id="73181-148">Pokud chcete do aplikace přidat funkce, můžete vybrat další možnosti konfigurace, včetně brandingu, certifikátů a tajných klíčů, oprávnění k rozhraní API a dalších.</span><span class="sxs-lookup"><span data-stu-id="73181-148">If you want to add capabilities to your application, you can select other configuration options including branding, certificates and secrets, API permissions, and more.</span></span>

## <a name="platform-specific-properties"></a><span data-ttu-id="73181-149">Vlastnosti specifické pro platformu</span><span class="sxs-lookup"><span data-stu-id="73181-149">Platform-specific properties</span></span>

<span data-ttu-id="73181-150">V následující tabulce jsou uvedeny vlastnosti, které je třeba nakonfigurovat a kopírovat pro různé typy aplikací.</span><span class="sxs-lookup"><span data-stu-id="73181-150">The following table shows the properties that you need to configure and copy for different kinds of apps.</span></span> <span data-ttu-id="73181-151">**Přiřazeno** znamená, že byste měli použít hodnotu přiřazenou službou Azure AD.</span><span class="sxs-lookup"><span data-stu-id="73181-151">**Assigned** means that you should use the value assigned by Azure AD.</span></span>

| <span data-ttu-id="73181-152">Typ aplikace</span><span class="sxs-lookup"><span data-stu-id="73181-152">App type</span></span>              | <span data-ttu-id="73181-153">Platforma</span><span class="sxs-lookup"><span data-stu-id="73181-153">Platform</span></span> | <span data-ttu-id="73181-154">ID aplikace (klienta)</span><span class="sxs-lookup"><span data-stu-id="73181-154">Application (client) ID</span></span> | <span data-ttu-id="73181-155">Tajný klíč klienta</span><span class="sxs-lookup"><span data-stu-id="73181-155">Client Secret</span></span> | <span data-ttu-id="73181-156">Identifikátor URI/adresa URL pro přesměrování</span><span class="sxs-lookup"><span data-stu-id="73181-156">Redirect URI/URL</span></span> | <span data-ttu-id="73181-157">Implicitní Flow</span><span class="sxs-lookup"><span data-stu-id="73181-157">Implicit Flow</span></span>                                                         |
|-----------------------|----------|-------------------------|---------------|------------------|-----------------------------------------------------------------------|
| <span data-ttu-id="73181-158">Nativní/mobilní</span><span class="sxs-lookup"><span data-stu-id="73181-158">Native/Mobile</span></span>         | <span data-ttu-id="73181-159">Nativní</span><span class="sxs-lookup"><span data-stu-id="73181-159">Native</span></span>   | <span data-ttu-id="73181-160">Přiřazené</span><span class="sxs-lookup"><span data-stu-id="73181-160">Assigned</span></span>                | <span data-ttu-id="73181-161">No</span><span class="sxs-lookup"><span data-stu-id="73181-161">No</span></span>            | <span data-ttu-id="73181-162">Přiřazené</span><span class="sxs-lookup"><span data-stu-id="73181-162">Assigned</span></span>         | <span data-ttu-id="73181-163">No</span><span class="sxs-lookup"><span data-stu-id="73181-163">No</span></span>                                                                    |
| <span data-ttu-id="73181-164">Webová aplikace</span><span class="sxs-lookup"><span data-stu-id="73181-164">Web App</span></span>               | <span data-ttu-id="73181-165">Web</span><span class="sxs-lookup"><span data-stu-id="73181-165">Web</span></span>      | <span data-ttu-id="73181-166">Přiřazené</span><span class="sxs-lookup"><span data-stu-id="73181-166">Assigned</span></span>                | <span data-ttu-id="73181-167">Yes</span><span class="sxs-lookup"><span data-stu-id="73181-167">Yes</span></span>           | <span data-ttu-id="73181-168">Yes</span><span class="sxs-lookup"><span data-stu-id="73181-168">Yes</span></span>              | <span data-ttu-id="73181-169">volitelné otevřené ID Připojení middleware ve výchozím nastavení používá hybridní tok (ano).</span><span class="sxs-lookup"><span data-stu-id="73181-169">Optional Open ID Connect middleware uses hybrid flow by default (Yes)</span></span> |
| <span data-ttu-id="73181-170">Jediná stránková aplikace (SPA)</span><span class="sxs-lookup"><span data-stu-id="73181-170">Single Page App (SPA)</span></span> | <span data-ttu-id="73181-171">Web</span><span class="sxs-lookup"><span data-stu-id="73181-171">Web</span></span>      | <span data-ttu-id="73181-172">Přiřazené</span><span class="sxs-lookup"><span data-stu-id="73181-172">Assigned</span></span>                | <span data-ttu-id="73181-173">Yes</span><span class="sxs-lookup"><span data-stu-id="73181-173">Yes</span></span>           | <span data-ttu-id="73181-174">Yes</span><span class="sxs-lookup"><span data-stu-id="73181-174">Yes</span></span>              | <span data-ttu-id="73181-175">Yes jednostránkové použít Open ID Připojení implicitní Flow</span><span class="sxs-lookup"><span data-stu-id="73181-175">Yes SPAs use Open ID Connect implicit Flow</span></span>                            |
| <span data-ttu-id="73181-176">Služba/démon</span><span class="sxs-lookup"><span data-stu-id="73181-176">Service/Daemon</span></span>        | <span data-ttu-id="73181-177">Web</span><span class="sxs-lookup"><span data-stu-id="73181-177">Web</span></span>      | <span data-ttu-id="73181-178">Přiřazené</span><span class="sxs-lookup"><span data-stu-id="73181-178">Assigned</span></span>                | <span data-ttu-id="73181-179">Yes</span><span class="sxs-lookup"><span data-stu-id="73181-179">Yes</span></span>           | <span data-ttu-id="73181-180">Yes</span><span class="sxs-lookup"><span data-stu-id="73181-180">Yes</span></span>              | <span data-ttu-id="73181-181">No</span><span class="sxs-lookup"><span data-stu-id="73181-181">No</span></span>                                                                    |

## <a name="create-a-service-principal"></a><span data-ttu-id="73181-182">Vytvoření instančního objektu</span><span class="sxs-lookup"><span data-stu-id="73181-182">Create a service principal</span></span>

<span data-ttu-id="73181-183">Pokud chcete získat přístup k prostředkům ve vašem předplatném, musíte aplikaci přiřadit roli.</span><span class="sxs-lookup"><span data-stu-id="73181-183">To access resources in your subscription, you must assign a role to the application.</span></span> <span data-ttu-id="73181-184">K tomu, abyste se mohli rozhodnout, která role nabízí správná oprávnění pro aplikaci, přečtěte si téma [předdefinované role Azure](/azure/role-based-access-control/built-in-roles).</span><span class="sxs-lookup"><span data-stu-id="73181-184">For help deciding which role offers the right permissions for the application, see [Azure built-in roles](/azure/role-based-access-control/built-in-roles).</span></span>

> [!NOTE]
> <span data-ttu-id="73181-185">Rozsah můžete nastavit na úrovni předplatného, skupiny prostředků nebo prostředku.</span><span class="sxs-lookup"><span data-stu-id="73181-185">You can set the scope at the level of the subscription, resource group, or resource.</span></span> <span data-ttu-id="73181-186">Oprávnění jsou zděděna na nižší úrovně rozsahu.</span><span class="sxs-lookup"><span data-stu-id="73181-186">Permissions are inherited to lower levels of scope.</span></span> <span data-ttu-id="73181-187">Například přidání aplikace do role čtenář pro skupinu prostředků znamená, že může číst skupinu prostředků a všechny prostředky, které obsahuje.</span><span class="sxs-lookup"><span data-stu-id="73181-187">For example, adding an application to the Reader role for a resource group means it can read the resource group and any resources it contains.</span></span>

1. <span data-ttu-id="73181-188">V Azure Portal vyberte úroveň rozsahu, do které chcete aplikaci přiřadit.</span><span class="sxs-lookup"><span data-stu-id="73181-188">In the Azure portal, select the level of scope to assign the application to.</span></span> <span data-ttu-id="73181-189">Pokud například chcete přiřadit roli v oboru předplatného, vyhledejte a vyberte **odběry** nebo vyberte **předplatná** na domovské stránce.</span><span class="sxs-lookup"><span data-stu-id="73181-189">For example, to assign a role at the subscription scope, search for and select **Subscriptions**, or select **Subscriptions** on the home page.</span></span>

   :::image type="content" source="./images/manage-payouts/search-for-subscriptions.png" alt-text="Snímek obrazovky znázorňující hledání obrazovky předplatných":::

2. <span data-ttu-id="73181-191">Vyberte předplatné, ke kterému chcete aplikaci přiřadit.</span><span class="sxs-lookup"><span data-stu-id="73181-191">Select the subscription to assign the application to.</span></span>

   :::image type="content" source="./images/manage-payouts/internal-testing-subscription.png" alt-text="Snímek obrazovky s obrazovkou předplatných s příznakem interního testování nastaveným na hodnotu true":::

> [!NOTE]
> <span data-ttu-id="73181-193">Pokud nevidíte předplatné, které hledáte, vyberte filtr globálních předplatných a ujistěte se, že pro portál je vybrané požadované předplatné.</span><span class="sxs-lookup"><span data-stu-id="73181-193">If you don't see the subscription you're looking for, select the global subscriptions filter and ensure the subscription you want is selected for the portal.</span></span>

3. <span data-ttu-id="73181-194">Vyberte **řízení přístupu (IAM)** a pak vyberte **Přidat přiřazení role**.</span><span class="sxs-lookup"><span data-stu-id="73181-194">Select **Access control (IAM)**, and then select **Add role assignment**.</span></span>

4. <span data-ttu-id="73181-195">Vyberte roli, kterou chcete aplikaci přiřadit.</span><span class="sxs-lookup"><span data-stu-id="73181-195">Select the role you wish to assign to the application.</span></span> <span data-ttu-id="73181-196">Pokud například chcete, aby aplikace mohla provádět akce, jako je restartování, spuštění a zastavení instancí, vyberte roli Přispěvatel.</span><span class="sxs-lookup"><span data-stu-id="73181-196">For example, to allow the application to execute actions like reboot, start and stop instances, select the Contributor role.</span></span> <span data-ttu-id="73181-197">Přečtěte si další informace o [dostupných rolích](/azure/role-based-access-control/built-in-roles).</span><span class="sxs-lookup"><span data-stu-id="73181-197">Read more about [available roles](/azure/role-based-access-control/built-in-roles).</span></span>

   <span data-ttu-id="73181-198">Ve výchozím nastavení se aplikace Azure AD nezobrazí v dostupných možnostech.</span><span class="sxs-lookup"><span data-stu-id="73181-198">By default, Azure AD applications aren't displayed in the available options.</span></span> <span data-ttu-id="73181-199">Pokud chcete najít svou aplikaci, vyhledejte ji a vyberte ji z výsledků.</span><span class="sxs-lookup"><span data-stu-id="73181-199">To find your application, search on the name and select it from the results.</span></span> <span data-ttu-id="73181-200">V následujícím snímku obrazovky `example-app` je aplikace AAD, kterou jste zaregistrovali.</span><span class="sxs-lookup"><span data-stu-id="73181-200">In the below screenshot, `example-app` is the AAD app you registered.</span></span>

   :::image type="content" source="./images/manage-payouts/add-role-assignment.png" alt-text="Snímek obrazovky znázorňující uživatelské rozhraní pro přidání přiřazení role pro testovací aplikaci":::

5. <span data-ttu-id="73181-202">Vyberte **Uložit**.</span><span class="sxs-lookup"><span data-stu-id="73181-202">Select **Save**.</span></span> <span data-ttu-id="73181-203">Pak můžete zobrazit vaši aplikaci v seznamu uživatelů s rolí pro tento obor.</span><span class="sxs-lookup"><span data-stu-id="73181-203">You can then see your application in the list of users with a role for that scope.</span></span>

   <span data-ttu-id="73181-204">Můžete začít používat váš instanční objekt ke spouštění skriptů nebo aplikací.</span><span class="sxs-lookup"><span data-stu-id="73181-204">You can start using your service principal to run your scripts or apps.</span></span> <span data-ttu-id="73181-205">chcete-li spravovat oprávnění instančního objektu, přečtěte si téma stav souhlasu uživatele, kontrola oprávnění, informace o přihlášení a další informace, v [Azure Portal](https://portal.azure.com)si můžete Enterprise aplikace.</span><span class="sxs-lookup"><span data-stu-id="73181-205">To manage your service principal's permissions, see user consent status, review permissions, see sign-in information, and more), view your Enterprise applications in the [Azure portal](https://portal.azure.com).</span></span>

## <a name="set-up-api-permissions"></a><span data-ttu-id="73181-206">Nastavení oprávnění API</span><span class="sxs-lookup"><span data-stu-id="73181-206">Set up API permissions</span></span>

<span data-ttu-id="73181-207">V této části najdete pokyny, jak nastavit požadovaná oprávnění rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="73181-207">This section provides instruction on how to set up the required API permissions.</span></span> <span data-ttu-id="73181-208">Další informace o nastavení oprávnění pro rozhraní API partnerského centra najdete v tématu [ověřování prostřednictvím rozhraní API pro partnery](/partner/develop/api-authentication).</span><span class="sxs-lookup"><span data-stu-id="73181-208">For more information about setting up Partner Center API permissions, see [Partner API authentication](/partner/develop/api-authentication).</span></span>

<span data-ttu-id="73181-209">**udělení oprávnění Graph API**</span><span class="sxs-lookup"><span data-stu-id="73181-209">**Grant permission to Graph API**</span></span>

1. <span data-ttu-id="73181-210">Otevřete [Registrace aplikací](https://go.microsoft.com/fwlink/?linkid=2083908) v Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="73181-210">Open the [App registrations](https://go.microsoft.com/fwlink/?linkid=2083908) in the Azure portal.</span></span>

2. <span data-ttu-id="73181-211">Vyberte aplikaci nebo [vytvořte aplikaci](/azure/active-directory/develop/quickstart-register-app) , pokud ji ještě nemáte.</span><span class="sxs-lookup"><span data-stu-id="73181-211">Select an application, or [create an app](/azure/active-directory/develop/quickstart-register-app) if you don't already have one.</span></span>

3. <span data-ttu-id="73181-212">Na stránce Přehled aplikace v části **Spravovat** vyberte **oprávnění rozhraní API** a pak **přidejte oprávnění**.</span><span class="sxs-lookup"><span data-stu-id="73181-212">On the application's Overview page, under **Manage**, select **API Permissions**, then **Add a permission**.</span></span>

4. <span data-ttu-id="73181-213">v seznamu dostupných rozhraní api vyberte **Microsoft Graph** .</span><span class="sxs-lookup"><span data-stu-id="73181-213">Select **Microsoft Graph** from the list of available APIs.</span></span>

5. <span data-ttu-id="73181-214">Vyberte **delegovaná oprávnění** a přidejte požadovaná oprávnění.</span><span class="sxs-lookup"><span data-stu-id="73181-214">Select **Delegated permissions** and add required permissions.</span></span> <span data-ttu-id="73181-215">Další informace najdete v tématu [Konfigurace přístupu k aplikaci](/azure/active-directory/develop/quickstart-configure-app-access-web-apis).</span><span class="sxs-lookup"><span data-stu-id="73181-215">For more information, see [Configure app access](/azure/active-directory/develop/quickstart-configure-app-access-web-apis).</span></span>

   :::image type="content" source="./images/manage-payouts/graph-request-api-permissions.png" alt-text="snímek obrazovky s obrazovkou oprávnění žádosti v Azure Portal s vybraným Microsoft Graph":::

<span data-ttu-id="73181-217">**Vyjádření souhlasu rozhraní API k rozhraní API partnerského centra prostřednictvím aplikace AAD**</span><span class="sxs-lookup"><span data-stu-id="73181-217">**Consent to API access to Partner Center API via AAD app**</span></span>

6. <span data-ttu-id="73181-218">V aplikaci vyberte **oprávnění rozhraní API** a pak na obrazovce požádat API oprávnění vyberte **Přidat oprávnění** a pak **rozhraní API moje organizace používá**.</span><span class="sxs-lookup"><span data-stu-id="73181-218">For your application, select **API permissions**, then, from the Request API permissions screen, select **Add a permission**, then **APIs my organization uses**.</span></span>

7. <span data-ttu-id="73181-219">vyhledejte **microsoft Partner (microsoft Dev Center) API (4990cffe-04e8-4e8b-808a-1175604b879f)**.</span><span class="sxs-lookup"><span data-stu-id="73181-219">Search for **Microsoft Partner (Microsoft Dev Center) API (4990cffe-04e8-4e8b-808a-1175604b879f)**.</span></span>

   :::image type="content" source="./images/manage-payouts/partner-api-request-permissions.png" alt-text="Snímek obrazovky s vybranou obrazovkou oprávnění k rozhraní API s vybraným partnerem Microsoftu":::

8. <span data-ttu-id="73181-221">Nastavte delegovaná oprávnění k **partnerskému centru**.</span><span class="sxs-lookup"><span data-stu-id="73181-221">Set the Delegated Permissions to **Partner Center**.</span></span>

   :::image type="content" source="./images/manage-payouts/partner-api-request-permissions.png" alt-text="Snímek obrazovky znázorňující delegovaná oprávnění vybraná pro partnerské Centrum na obrazovce oprávnění API pro vyžádání":::

9. <span data-ttu-id="73181-223">Udělení **souhlasu správce** pro rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="73181-223">Grant **Admin consent** for the APIs.</span></span>

   :::image type="content" source="./images/manage-payouts/api-permissions.png" alt-text="Snímek obrazovky s přepínačem pro souhlas správce na obrazovce oprávnění k rozhraní API":::

   <span data-ttu-id="73181-225">Na obrazovce stavu souhlasu správce ověřte, že je povolený souhlas správce.</span><span class="sxs-lookup"><span data-stu-id="73181-225">Verify that Admin consent is enabled in the Admin consent status screen.</span></span>

   :::image type="content" source="./images/manage-payouts/admin-consent-verification.png" alt-text="Snímek obrazovky se zobrazením stavu souhlasu správce":::

10. <span data-ttu-id="73181-227">V části **ověřování** se ujistěte, že je možnost **umožnit toky veřejných klientů** nastavená na **hodnotu Ano**.</span><span class="sxs-lookup"><span data-stu-id="73181-227">In the **Authentication** section, make sure the **Allow public client flows** option is set to **Yes**.</span></span>

    :::image type="content" source="./images/manage-payouts/allow-public-client-flows.png" alt-text="Snímek obrazovky s ověřovací obrazovkou s povolenými toky veřejných klientů nastavenou na hodnotu Ano.":::

## <a name="run-the-sample-code-in-visual-studio"></a><span data-ttu-id="73181-229">Spusťte vzorový kód v Visual Studio</span><span class="sxs-lookup"><span data-stu-id="73181-229">Run the sample code in Visual Studio</span></span>

<span data-ttu-id="73181-230">vzorový kód, který ukazuje, jak se dá rozhraní API použít pro platby a historii transakcí, najdete v části [Partner-Center-vyvzorkování-rozhraní api](https://github.com/microsoft/Partner-Center-Payout-APIs) GitHub úložišti.</span><span class="sxs-lookup"><span data-stu-id="73181-230">Sample code showing how the API can be used for payment and transaction history be found in the [Partner-Center-Payout-APIs](https://github.com/microsoft/Partner-Center-Payout-APIs) GitHub repo.</span></span>

### <a name="sample-code-notes"></a><span data-ttu-id="73181-231">Poznámky k ukázkovému kódu</span><span class="sxs-lookup"><span data-stu-id="73181-231">Sample code notes</span></span>

- <span data-ttu-id="73181-232">Konfigurace klientských tajných klíčů a certifikátů, jak je popsáno v části ověřování: v Azure Portal se nevyžadují dvě možnosti, [jak vytvořit instanční objekt](/azure/active-directory/develop/howto-create-service-principal-portal) .</span><span class="sxs-lookup"><span data-stu-id="73181-232">Configuration of Client secrets and Certificates as discussed in the Authentication: Two options section of [How to create a service principal in the Azure portal](/azure/active-directory/develop/howto-create-service-principal-portal) is not required.</span></span>
- <span data-ttu-id="73181-233">Účty s vícefaktorového ověřováním (MFA) se momentálně nepodporují a způsobí chybu.</span><span class="sxs-lookup"><span data-stu-id="73181-233">Accounts with multifactor authentication (MFA) are not currently supported and will cause an error.</span></span>
- <span data-ttu-id="73181-234">Rozhraní API pro výběr podporuje jenom přihlašovací údaje uživatele a hesla.</span><span class="sxs-lookup"><span data-stu-id="73181-234">Payout API only supports user/password-based credentials.</span></span>

## <a name="next-steps"></a><span data-ttu-id="73181-235">Další kroky</span><span class="sxs-lookup"><span data-stu-id="73181-235">Next steps</span></span>

- [<span data-ttu-id="73181-236">Vytvoření aplikace Azure AD a instančního objektu s přístupem k prostředkům pomocí portálu</span><span class="sxs-lookup"><span data-stu-id="73181-236">Use the portal to create an Azure AD application and service principal that can access resources</span></span>](/azure/active-directory/develop/howto-create-service-principal-portal)
- [<span data-ttu-id="73181-237">Registrace aplikace na platformě Microsoft Identity Platform</span><span class="sxs-lookup"><span data-stu-id="73181-237">Register an application with the Microsoft identity platform</span></span>](/graph/auth-register-app-v2)
- [<span data-ttu-id="73181-238">Konfigurace klientské aplikace pro přístup k webovému rozhraní API</span><span class="sxs-lookup"><span data-stu-id="73181-238">Configure a client application to access a web API</span></span>](/azure/active-directory/develop/quickstart-configure-app-access-web-apis)
